"use strict";

import { expect } from "chai";
import { blobFromBase64 } from "../../../../src/core/functions/misc.js";

let encodedData;
before(() => {
    encodedData = "/9j/4AAQSkZJRgABAQEASABIAAD/4QDiRXhpZgAATU0AKgAAAAgABwESAAMAAAABAAEAAAEaAAUAAAABAAAAYgEbAAUAAAABAAAAagEoAAMAAAABAAIAAAExAAIAAAAeAAAAcgEyAAIAAAAUAAAAkIdpAAQAAAABAAAApAAAAAAAAABIAAAAAQAAAEgAAAABQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykAMjAyNDowMzoyNiAxNDo0ODo1MgAABJAAAAcAAAAEMDIyMaABAAMAAAABAAEAAKACAAMAAAABAJYAAKADAAMAAAABAJYAAAAAAAD/4Q4baHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLwA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJYTVAgQ29yZSA1LjUuMCI+IDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdEV2dD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlRXZlbnQjIiBkYzpmb3JtYXQ9ImltYWdlL2pwZWciIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiIHBob3Rvc2hvcDpJQ0NQcm9maWxlPSJzUkdCIElFQzYxOTY2LTIuMSIgeG1wOkNyZWF0ZURhdGU9IjIwMTUtMTAtMDZUMjA6MjQ6MjkrMDM6MDAiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcDpNZXRhZGF0YURhdGU9IjIwMjQtMDMtMjZUMTQ6NDg6NTIrMDI6MDAiIHhtcDpNb2RpZnlEYXRlPSIyMDI0LTAzLTI2VDE0OjQ4OjUyKzAyOjAwIiB4bXBNTTpEb2N1bWVudElEPSI0NzRDMDA2OTEzNEZCRTQwQkUzNjg2Mzc3RjZFMTE5QiIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDoyNEExMzc0NjRGNkNFNTExQTIyMEIzQjNGMEMwQ0E3NCIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSI0NzRDMDA2OTEzNEZCRTQwQkUzNjg2Mzc3RjZFMTE5QiI+IDx4bXBNTTpIaXN0b3J5PiA8cmRmOlNlcT4gPHJkZjpsaSB4bXBNTTphY3Rpb249InNhdmVkIiB4bXBNTTpjaGFuZ2VkPSIvIiB4bXBNTTppbnN0YW5jZUlEPSJ4bXAuaWlkOjIxQTEzNzQ2NEY2Q0U1MTFBMjIwQjNCM0YwQzBDQTc0IiB4bXBNTTpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ1M2IChXaW5kb3dzKSIgeG1wTU06d2hlbj0iMjAxNS0xMC0wNlQyMDoyNTo0NCswMzowMCIvPiA8cmRmOmxpIHhtcE1NOmFjdGlvbj0ic2F2ZWQiIHhtcE1NOmNoYW5nZWQ9Ii8iIHhtcE1NOmluc3RhbmNlSUQ9InhtcC5paWQ6MjRBMTM3NDY0RjZDRTUxMUEyMjBCM0IzRjBDMENBNzQiIHhtcE1NOnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDUzYgKFdpbmRvd3MpIiB4bXBNTTp3aGVuPSIyMDE1LTEwLTA2VDIwOjI2OjI1KzAzOjAwIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJwcm9kdWNlZCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWZmaW5pdHkgUGhvdG8gMS4xMC42IiBzdEV2dDp3aGVuPSIyMDI0LTAzLTI2VDE0OjQ4OjUyKzAyOjAwIi8+IDwvcmRmOlNlcT4gPC94bXBNTTpIaXN0b3J5PiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8P3hwYWNrZXQgZW5kPSJ3Ij8+/+0ALFBob3Rvc2hvcCAzLjAAOEJJTQQlAAAAAAAQ1B2M2Y8AsgTpgAmY7PhCfv/iAmRJQ0NfUFJPRklMRQABAQAAAlRsY21zBDAAAG1udHJSR0IgWFlaIAfoAAMAGgAMADAAAWFjc3BBUFBMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD21gABAAAAANMtbGNtcwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAC2Rlc2MAAAEIAAAAPmNwcnQAAAFIAAAATHd0cHQAAAGUAAAAFGNoYWQAAAGoAAAALHJYWVoAAAHUAAAAFGJYWVoAAAHoAAAAFGdYWVoAAAH8AAAAFHJUUkMAAAIQAAAAIGdUUkMAAAIQAAAAIGJUUkMAAAIQAAAAIGNocm0AAAIwAAAAJG1sdWMAAAAAAAAAAQAAAAxlblVTAAAAIgAAABwAcwBSAEcAQgAgAEkARQBDADYAMQA5ADYANgAtADIALgAxAABtbHVjAAAAAAAAAAEAAAAMZW5VUwAAADAAAAAcAE4AbwAgAGMAbwBwAHkAcgBpAGcAaAB0ACwAIAB1AHMAZQAgAGYAcgBlAGUAbAB5WFlaIAAAAAAAAPbWAAEAAAAA0y1zZjMyAAAAAAABDEIAAAXe///zJQAAB5MAAP2Q///7of///aIAAAPcAADAblhZWiAAAAAAAABvoAAAOPUAAAOQWFlaIAAAAAAAACSfAAAPhAAAtsNYWVogAAAAAAAAYpcAALeHAAAY2XBhcmEAAAAAAAMAAAACZmYAAPKnAAANWQAAE9AAAApbY2hybQAAAAAAAwAAAACj1wAAVHsAAEzNAACZmgAAJmYAAA9c/9sAQwBQNzxGPDJQRkFGWlVQX3jIgnhubnj1r7mRyP///////////////////////////////////////////////////9sAQwFVWlp4aXjrgoLr/////////////////////////////////////////////////////////////////////////8AAEQgAlgCWAwEiAAIRAQMRAf/EABkAAQADAQEAAAAAAAAAAAAAAAABAgMEBf/EACwQAAICAQQBAwMEAgMAAAAAAAABAhEhAxIxQVEEYXEiMoETUpGhFLEjgtH/xAAWAQEBAQAAAAAAAAAAAAAAAAAAAQL/xAAWEQEBAQAAAAAAAAAAAAAAAAAAEQH/2gAMAwEAAhEDEQA/AOIAAAAAAAAFowlJ1FNmkfTyfLSAxB0r00f3h+nj+5gcwOj/ABk+JfyUl6ecer+AMgS008qiAAAAAAAAAAAAAFoQc3SAiMXJ0kdMPTxik9TL/aSktFYzKv4LxWLeWwJVrEfpXhE1gfAWcICBxwTTa5RRuiCfktH+jPcwpFGkownh/wBnNq+nccxyje7qy7jT5A84HTPS3yaSpnO006fIEAAAAAAAAmKcmkjrSjo6fuU0I7Y76uTxEq3c7eUv7KjS1vaxbX8mtYxk5XbnddnRGa3qFZq7JuLiU6w8BtNf+E7s5DqiKqyrLvjgrWAK0+kIrJa/CZKTryVFUmHJxIlOm0sEWn3YExlWpFyI9RpqTbX3L+yIL/lT6Rvqxv6kVHng01Y1K1wzMigAAExVySIN/SxvUt9AdGzbp+7Rzttcf6OyavGTPHZUYwdLdL8MtmMITTUmhPTTinHpYKaVbmm6tUBre6n0y1+DOP03GWC8aXeSRc1LwsckSstaKSlUqIKubUqiikpyS8fGDRZbqvASTkrz4s0iii2sv3KpPNdGkm0+LEY8+4InT+5e+DprFHJpJ3t7TN3P3BjPXgnF0cR22nNVwcklUmgqoAIB1ejWJM5Tr9E8SQHTJqmk+DE0k8Y7MnlcNNFRKa3ONlJpXxkrNptMltuKt5AN2F9vwRZMOcjUXjwU5nTNE75G1fnyRpDhUHTtxdtMzbakmkbVbVspJLdzj3Kgna+plor+DNpY7o0vEfd0QVimm3VEylfPJZrvorJLFpu/BRKjUXK08dHJqr6jduVNOlgw1XcgKAAiht6Z05ZrBiW05bZpgd+nHcmiiTdqrovpOnGPRrOOKTS8lRxtKMs5LyimrDburyumVbfh2BQvHLKVfRdLpIqLpZomsYeCYrarf4yZTk75qiKvKVfJSc1TSS+Su61l8/0Q+BBtGO6OK9/Ylwa7SXZj+pJO1h90StVy5b/JBol9Ld21wJOq8FotQhuq74M5W282yiv3WvzZz6n3s6ZLZC+v9nI+QAAIoAAOrTnu0124nXHUjJLttHm6c3CVnRardudlR0asXJfTTXgwW+2krXii0JbI25bl2vBpGbcXt2teO2Bkt8nW1KufYtujBYVsmMoSjdbeqKx23TT/AOoFZSnK26M2b7V1JL5K7IJ3KcQMkm+Og/Bo9j+3d+BCN6lVSXIEbEl5bKNU1WTpkobXFyp912Z3GDuMc9NgT+qnH6llOhDN0vgzjF6kl0l2WnJacH78AZeonb2+DAlu3bIIoAAAAAF4TrDKADsjVWpVfK8kN1TTr2OeGo4+6N4uOpGk8lRrHY27S84eS2moNOO7ni1RzYi+L+Sy1Gne0DocaXin5wQ4Yzz0Zx1W0/pwFPFPKAu9ijTSQVqnbS/izLdLi2vFsmLk5rdLHeALY3XVrwiOVnv2JdN1FmU9VQk6dsDaTjpwt4XjycepN6krZE5ym7kypFAAAAAAAAAAAJTrggAaLVfEsl1qJ917NGALUjpUk3aml7CTXmP4OYCkb7/LQ/Xr3MAKRpLVlLHC9jMAigAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/9k=";
});

describe("blobToBase64", () => {
    it("should create a Blob from base64 data with the correct size and type", async () => {
        const blob = blobFromBase64(encodedData);
        expect(blob).to.be.instanceOf(Blob);
        expect(blob).to.have.property("size", 6002);
        expect(blob).to.have.property("type", "image/jpeg");
    });
});